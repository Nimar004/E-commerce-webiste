<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.0.0/css/all.css /" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <section id="header">
        <a href="#"><img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTQwIiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMTQwIDQwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDx0ZXh0IHg9IjAiIHk9IjI4IiBmb250LWZhbWlseT0iQnJ1c2ggU2NyaXB0IE1ULCBjdXJzaXZlIiBmb250LXNpemU9IjI4IiBmaWxsPSJibGFjayI+CiAgICBOaW1hYXJ6CiAgPC90ZXh0Pgo8L3N2Zz4=" alt="Nimaarz Logo"  class="logo" alt=""></a>
        <div>
            <ul id="navbar">
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="about.html">about</a></li>
                <li><a href="contact.html">contact</a></li>
                <li><a id='lg-bag' href="cart.html" style="font-size: 24px;">ðŸ‘œ</a></li>
                <a href="#" id="close">â•³</a>
            </ul>
        </div>
        <div id="mobile">
            ðŸ‘œ
            <div id="bar">á–¶á–·</div>
        </div>
    </section>

    <section id="page-header" class="checkout-header">
        <h2>#checkout</h2>
        <p>Complete your purchase!</p>
    </section>

    <section id="checkout-form" class="section-p1">
        <h3>Shipping Information</h3>
        <form id="shipping-form">
            <div class="form-group">
                <label for="full-name">Full Name:</label>
                <input type="text" id="full-name" required>
            </div>
            <div class="form-group">
                <label for="address">Address:</label>
                <input type="text" id="address" required>
            </div>
            <div class="form-group">
                <label for="city">City:</label>
                <input type="text" id="city" required>
            </div>
            <div class="form-group">
                <label for="zip">Zip Code:</label>
                <input type="text" id="zip" required>
            </div>
            <div class="form-group">
                <label for="country">Country:</label>
                <input type="text" id="country" required>
            </div>
        </form>

        <h3>Payment Information</h3>
        <form id="payment-form">
            <div class="form-group">
                <label for="card-number">Card Number:</label>
                <input type="text" id="card-number" placeholder="XXXX-XXXX-XXXX-XXXX" required>
            </div>
            <div class="form-group">
                <label for="expiry-date">Expiry Date:</label>
                <input type="text" id="expiry-date" placeholder="MM/YY" required>
            </div>
            <div class="form-group">
                <label for="cvv">CVV:</label>
                <input type="text" id="cvv" placeholder="XXX" required>
            </div>
        </form>

        <div id="order-summary">
            <h3>Order Summary</h3>
            <table>
                <thead>
                    <tr>
                        <td>Product</td>
                        <td>Quantity</td>
                        <td>Price</td>
                        <td>Total</td>
                    </tr>
                </thead>
                <tbody id="checkout-items-container">
                    <!-- Cart items will be rendered here -->
                </tbody>
                <tfoot>
                    <tr>
                        <td colspan="3"><strong>Subtotal</strong></td>
                        <td id="checkout-subtotal">â‚¹0.00</td>
                    </tr>
                    <tr>
                        <td colspan="3"><strong>Shipping</strong></td>
                        <td>Free</td>
                    </tr>
                    <tr>
                        <td colspan="3"><strong>Total</strong></td>
                        <td id="checkout-total">â‚¹0.00</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <button class="normal" id="place-order-btn">Place Order</button>
    </section>

    <section id="newsletter" class="section-p1">
        <div class="newstack">
            <h4> Sign up for NewsLetter</h4>
            <p>Get Email updates about our latest shop and <span>special offers</span></p>
        </div>
        <div class="form">
            <input type="email" id="newsletter-email" placeholder="Your Email id">
            <button class="normal" id="newsletter-signup-btn">Sign Up</button>
        </div>
    </section>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            renderCheckoutSummary();

            const placeOrderBtn = document.getElementById('place-order-btn');
            if (placeOrderBtn) {
                placeOrderBtn.addEventListener('click', (event) => {
                    event.preventDefault();
                    handlePlaceOrder();
                });
            }

            // Newsletter signup functionality (copied from script.js)
            const newsletterSignupBtn = document.getElementById('newsletter-signup-btn');
            if (newsletterSignupBtn) {
                newsletterSignupBtn.addEventListener('click', () => {
                    const emailInput = document.getElementById('newsletter-email');
                    if (emailInput && emailInput.value) {
                        alert(`Thank you for signing up for our newsletter with ${emailInput.value}!`);
                        emailInput.value = ''; // Clear the input
                    } else {
                        alert('Please enter a valid email address.');
                    }
                });
            }
        });

        function renderCheckoutSummary() {
            const checkoutItemsContainer = document.getElementById('checkout-items-container');
            checkoutItemsContainer.innerHTML = '';

            let currentCart = getCart();
            let subtotal = 0;

            if (currentCart.length === 0) {
                checkoutItemsContainer.innerHTML = '<tr><td colspan="4">Your cart is empty. Please add items to proceed to checkout.</td></tr>';
                document.getElementById('place-order-btn').disabled = true;
            } else {
                currentCart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    subtotal += itemTotal;

                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${item.name} ${item.size ? `(Size: ${item.size})` : ''}</td>
                        <td>${item.quantity}</td>
                        <td>â‚¹${item.price.toFixed(2)}</td>
                        <td>â‚¹${itemTotal.toFixed(2)}</td>
                    `;
                    checkoutItemsContainer.appendChild(row);
                });
            }

            document.getElementById('checkout-subtotal').innerText = `â‚¹${subtotal.toFixed(2)}`;
            document.getElementById('checkout-total').innerText = `â‚¹${subtotal.toFixed(2)}`;
        }

        function handlePlaceOrder() {
            const fullName = document.getElementById('full-name').value;
            const address = document.getElementById('address').value;
            const city = document.getElementById('city').value;
            const zip = document.getElementById('zip').value;
            const country = document.getElementById('country').value;
            const cardNumber = document.getElementById('card-number').value;
            const expiryDate = document.getElementById('expiry-date').value;
            const cvv = document.getElementById('cvv').value;

            if (!fullName || !address || !city || !zip || !country || !cardNumber || !expiryDate || !cvv) {
                alert('Please fill in all shipping and payment information.');
                return;
            }

            // Simulate order processing
            alert('Order placed successfully! Thank you for your purchase.');
            
            // Clear the cart after successful order
            cart = [];
            saveCart();
            
            // Optionally redirect to an order confirmation page or home page
            window.location.href = 'index.html';
        }
    </script>
</body>
</html>
